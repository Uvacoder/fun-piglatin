{{ define "main" }}
<section class="section container-fluid mt-n3 pb-3">
  <div class="row justify-content-center">
    <div class="col-lg-12 text-center">
      <h1 class="mt-0 typewriter" style="font-family:Courgette" id="title"></h1>
    </div>
    <div class="col-lg-9 col-xl-8 text-center">
      <p class="lead animate__animated animate__fadeIn animate__slower">{{ .Params.Lead | safeHTML }}</p>
      <button class="btn btn-primary mb-2 animate__animated animate__slower animate__fadeIn " onclick="myFunction()">Translate <i class="ri-translate"></i>
      </button>
      <button class="btn btn-primary mb-2 animate__animated animate__slower animate__fadeIn" onclick="talkToMe()">Speak <i class="ri-volume-up-line"></i>
      </button>
      <p id="error"></p>
      <script>
      function talkToMe() {
        if ('speechSynthesis' in window) {
        // Speech Synthesis supported üéâ
        var msg = new SpeechSynthesisUtterance();
        msg.text = document.getElementById("out").innerHTML;
        window.speechSynthesis.speak(msg);
        }else{
          // Speech Synthesis Not Supported üò£
          document.getElementById("error").innerHTML = "Sorry, your browser doesn't support text to speech!";
        }
        
      }
      </script>
      <script>
      function myFunction() {
        var string = document.getElementById("input").value;
        var words = string.split(" ");
        var answer = "";
        var temp = "";
        for (var i = 0; i < words.length; i += 1) {
            temp = words[i].slice(1);
            if(document.getElementById("input").value == "") {
               document.getElementById("error").innerHTML = "<span style='color: red;'> You didn't enter a phrase!</span>";
            }
            if(typeof temp === 'undefined' || typeof words[i][0] === 'undefined') {
              document.getElementById("error").innerHTML = "<span style='color: red;'> Don't use spaces at the end! </span>";
              break;
            } else {
              answer = answer + (temp.toLowerCase()+words[i][0].toLowerCase()+"ay") + " ";
            }
            document.getElementById("out").innerHTML = answer;
        }
      }
      </script>
    </div>
  </div>
{{ end }}

{{ define "sidebar-prefooter" }}
<section class="section section-sm">
  <div class="container animate__animated animate__slow animate__fadeInUpBig animate__delay-1s">
    <div class="row justify-content-center text-center">
      <div class="col-lg-5">
        <form>
          <div class="form-group">
            <label for="exampleFormControlTextarea1"><h2 class="h4">Plain Text</h2></label>
            <textarea class="form-control" id="input" rows="3"  placeholder="I love pig latin ..."></textarea>
          </div>
        </form>
      </div>
      <div class="col-lg-5">
        <form>
          <div class="form-group">
            <label for="exampleFormControlTextarea1"><h2 class="h4">Pig Latin</h2></label>
            <textarea class="form-control" id="out" rows="3"  placeholder="iay ovelay igpay atin lay ..."></textarea>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>
{{ end }}



{{ define "sidebar-footer" }}
<section class="section section-sm container-fluid">
  <div class="row justify-content-center text-center">
    <div class="col-lg-9">
      <p class="meta"><button  class="btn btn-primary mb-2 mr-2" onclick="show()">Listen</button>to the  SYSK episode that inspired the app.</p> 
      <iframe id="sysk" style="display:none" src="https://open.spotify.com/embed-podcast/episode/1Lvn2Wuck6kC6x1cQu68fE" width="75%" height="75%" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
      {{- .Content -}}
      </br>
    </div>
  </div>
</section>
<script>
function show(button, elem) {
  document.getElementById("sysk").style.display = "block";
}
</script>
<script>
var i = 0;
var txt = 'JPig the Pig-Latin Generator üê∑'; /* The text */
var speed = 100; /* The speed/duration of the effect in milliseconds */

function typeWriter() {
  if (i < txt.length) {
    document.getElementById("title").innerHTML += txt.charAt(i);
    i++;
    setTimeout(typeWriter, speed);
  }
}</script>
{{ end }}

